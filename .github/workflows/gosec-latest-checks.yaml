name: Run Gosec
on:
  push:
    branches:
      # - master
      - gosec # for testing this workflow
  pull_request:
    branches:
      # - master
jobs:
  tests:
    runs-on: ubuntu-latest
    env:
      GO111MODULE: on
    steps:
      - name: Checkout Source 
        uses: actions/checkout@v2
      # - name: Look at where we are
      #   run: |
      #     pwd
      #     ls -a
      - name: Get Gosec
        # working-directory: ./src/github.com/${{ github.repository }}
        run: curl -sfL https://raw.githubusercontent.com/securego/gosec/master/install.sh | sudo sh -s -- -b /usr/bin latest
      - name: Run Gosec Security Scanner 
        run: gosec -exclude=G107 ./...
      #   uses: securego/gosec@master
      #   with:
      #     args: ./...